(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{108:function(e,a,t){},109:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(56),c=t.n(l),o=t(9),s=t(1),i=t(24),m=t(57),u=t.n(m),p=function(){return r.a.createElement("div",{className:"Home_Page"},r.a.createElement("div",{className:"blur"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:u.a.title},r.a.createElement("h2",null,"kosg.su"),r.a.createElement("h4",null,"\u0441\u0435\u0440\u0432\u0438\u0441 \u0434\u0438\u0441\u0442\u0430\u043d\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0441\u0443\u0440\u0434\u043e\u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f\u043c \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0443\u044e \u0441\u0440\u0435\u0434\u0443 \u0434\u043b\u044f \u0438\u043d\u0432\u0430\u043b\u0438\u0434\u043e\u0432 \u043f\u043e \u0441\u043b\u0443\u0445\u0443 \u0441 \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u043c\u0438 \u0437\u0430\u0442\u0440\u0430\u0442\u0430\u043c\u0438, \u0430 \u0433\u043b\u0443\u0445\u0438\u043c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u043a\u043e\u043c\u043c\u0443\u043d\u0438\u043a\u0430\u0446\u0438\u044f\u043c \u043d\u0430\u0440\u0430\u0432\u043d\u0435 \u0441\u043e \u0432\u0441\u0435\u043c\u0438."),r.a.createElement(o.b,{className:"nav-link",to:"/"},"\u0432\u044b\u0439\u0442\u0438")))))},d=t(35),g=t(5),f=t.n(g),v=t(60),b=t.n(v),_=t(61),E=t.n(_),h=t(2),O=t.n(h),N=t(12),j=t(45),x=t.n(j),w=t(39);t(42);function k(){}var C=Object(n.createContext)({token:null,userEmail:null,userId:null,login:k,logout:k,isAuthenticated:!1,online_room:[],setOnline_room:k}),y=function(){var e=Object(n.useState)(!1),a=Object(s.a)(e,2),t=a[0],r=a[1],l=Object(n.useState)(null),c=Object(s.a)(l,2),o=c[0],i=c[1];return{loading:t,request:Object(n.useCallback)((function(e){var a,t,n,l,c,o=arguments;return f.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"GET",t=o.length>2&&void 0!==o[2]?o[2]:null,n=o.length>3&&void 0!==o[3]?o[3]:{},r(!0),s.prev=4,t&&(t=JSON.stringify(t),n["Content-Type"]="application/json"),s.next=8,f.a.awrap(fetch(e,{method:a,body:t,headers:n}));case 8:return l=s.sent,s.next=11,f.a.awrap(l.json());case 11:if(c=s.sent,l.ok){s.next=14;break}throw new Error(c.message||"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");case 14:return r(!1),s.abrupt("return",c);case 18:throw s.prev=18,s.t0=s.catch(4),r(!1),i(s.t0.message),s.t0;case 23:case"end":return s.stop()}}),null,null,[[4,18]])}),[]),error:o,clearError:Object(n.useCallback)((function(){return i(null)}),[])}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=y(),t=a.request,r=a.error,l=a.clearError,c=Object(n.useContext)(C),o=Object(n.useState)(!1),i=Object(s.a)(o,2),m=i[0],u=i[1],p=Object(n.useState)(!0),d=Object(s.a)(p,2),g=d[0],v=d[1],b=Object(n.useState)(e),_=Object(s.a)(b,2),E=_[0],h=_[1];Object(n.useEffect)((function(){var e=null;return m&&!1===g?e=setInterval((function(){h((function(e){return e+1}))}),1e3):clearInterval(e),function(){clearInterval(e)}}),[m,g]),Object(n.useEffect)((function(){r&&N.b.error("".concat(r),{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),l()}),[r,l]);var O=function(){u(!0),v(!1)},j=function(e,a){return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!g),n.prev=1,n.next=4,f.a.awrap(t("/api/time/save","POST",{duration:E,videoName:e,callFrom:a},{Authorization:"Bearer ".concat(c.token)}));case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),console.log(n.t0);case 9:case"end":return n.stop()}}),null,null,[[1,6]])};return{handleStart:O,handlePauseResume:j,time:E}};function S(e){if(!e.props)return"0h:0m:0s";var a=parseInt(e.props,10),t=Math.floor(a/3600),n=Math.floor((a-3600*t)/60);return a=a-3600*t-60*n,t<10&&(t="0"+t),n<10&&(n="0"+n),a<10&&(a="0"+a),"".concat(t,"h:").concat(n,"m:").concat(a,"s")}var A=w.a.connect("https://kosg.su",{reconnection:!1}),I=function(e){var a=P(0),t=a.handleStart,l=a.handlePauseResume,c=a.time,o=JSON.parse(localStorage.getItem("userData")),i=o.username,m=o.usersurname,u=o.userEmail,p=Object(n.useState)(!1),g=Object(s.a)(p,2),v=g[0],_=g[1],h=Object(n.useState)(!1),j=Object(s.a)(h,2),w=j[0],k=(j[1],Object(n.useState)()),C=Object(s.a)(k,2),y=C[0],I=C[1],T=Object(n.useState)({}),D=Object(s.a)(T,2),H=D[0],B=D[1],F=Object(n.useState)([]),L=Object(s.a)(F,2),R=L[0],U=L[1],J=Object(n.useState)(!0),M=Object(s.a)(J,2),W=(M[0],M[1]),q=Object(n.useState)(),G=Object(s.a)(q,2),z=G[0],V=G[1],Z=Object(n.useRef)(),Y=Object(n.useRef)(),K=Object(n.useRef)(),X=Object(n.useRef)(A),Q=Object(n.useState)(null),$=Object(s.a)(Q,2),ee=$[0],ae=$[1],te=Object(n.useState)(null),ne=Object(s.a)(te,2),re=ne[0],le=ne[1],ce=Object(n.useState)(!1),oe=Object(s.a)(ce,2),se=(oe[0],oe[1]),ie=null,me=[],ue=o.userId,pe=Object(n.useRef)("".concat(i,"_").concat(ue,"_").concat((new Date).toLocaleDateString().replace(/\./g,""),"_").concat((new Date).toLocaleTimeString().replace(/\:/g,""),"_").concat(function(e){for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=e;n>0;--n)t+=a[Math.round(Math.random()*(a.length-1))];return t}(8))),de=new Audio(b.a),ge=new Audio(E.a),fe=Object(n.useState)({screen1:!0,screen2:!1}),ve=Object(s.a)(fe,2),be=ve[0],_e=ve[1],Ee=Object(n.useState)(!1),he=Object(s.a)(Ee,2),Oe=he[0],Ne=he[1],je=Object(n.useState)(!1),xe=Object(s.a)(je,2),we=xe[0],ke=xe[1],Ce=Object(n.useState)(100),ye=Object(s.a)(Ce,2),Pe=ye[0],Se=ye[1];function Ae(){l(pe.current,H.from),se(!1),X.current.emit("screenData:end",pe.current),ie=null,me=[]}Object(n.useEffect)((function(){var a=function(){var e;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,f.a.awrap(navigator.mediaDevices.getUserMedia({video:!0,audio:!0}));case 3:e=a.sent,I(e),Z.current.srcObject=e,a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("An error occurred: "+a.t0);case 11:case"end":return a.stop()}}),null,null,[[0,8]])};if(e.props){var t="room"+e.props.operator;X.current.emit("user:connect",pe.current),a(),navigator.mediaDevices.getDisplayMedia({video:!0}).then((function(e){return ae(e)})).catch((function(e){return console.log("An error occurred while getting screen media: "+e)})),navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){return le(e)})).catch((function(e){return console.log("An error occurred while getting audio media: "+e)})),A.emit("createRoom",u,t,ue),A.on("callUser",(function(e){var a=e.from,t=e.name,n=e.signal,r=e.surname;B({isReceivingCall:!0,from:a,name:t,signal:n,surname:r})}))}else A.emit("createRoom",u),A.on("busy__room",(function(e){W(e)})),A.on("online_room",(function(e){U(e)})),a();A.on("update",(function(e){return console.log(e)})),A.on("connect_error",(function(e){console.log(e),setTimeout((function(){window.location.reload()}),500)})),A.on("disconnect",(function(){window.location.reload()})),A.on("callEndeMessage",(function(e){window.location.reload(),console.log(e)})),A.on("callUser",(function(e){var a=e.from,t=e.name,n=e.signal;B({isReceivingCall:!0,from:a,name:t,signal:n})}))}),[e.props,u]),Object(n.useEffect)((function(){var e=Math.floor(Math.random()*R.length);if(R[e]){var a=R[e];V(a.operator),console.log(R),W(!1)}}),[R]);var Ie=function(){!function(){var e;ee&&re&&!ie&&(se(!0),t(),e="unavailable"===re?ee:new MediaStream([].concat(Object(d.a)(ee.getVideoTracks()),Object(d.a)(re.getAudioTracks()))),(ie=new MediaRecorder(e)).ondataavailable=function(e){var a=e.data;me.push(a),X.current.emit("screenData:start",{username:pe.current,data:a})},ie.onstop=Ae,ie.start(150))}(),de.loop=!1,de.pause(),_(!0);var a=new x.a({initiator:!1,trickle:!1,stream:y});a.on("signal",(function(a){A.emit("answerCall",{signal:a,to:H.from,room:"room"+e.props.operator})})),a.on("stream",(function(e){Y.current.srcObject=e})),a.on("error",(function(e){console.log(e),(e="RTCError: User-Initiated Abort, reason=Close called")&&(N.b.error("\u0441\u0432\u044f\u0437\u044c \u043f\u0440\u0435\u0440\u0432\u0430\u043d\u0430 \u2116".concat(e.message),{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),Ae(),A.emit("callEnde",H.from),K.current.destroy(),setTimeout((function(){window.location.reload()}),500))})),a.signal(H.signal),K.current=a};window.onerror=function(e,a,t,n,r){return"Uncaught Error: Connection failed."===e&&(Ae(),N.b.error("Connection failed",{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),setTimeout((function(){window.location.reload()}),500)),!1};var Te=function(){window.scrollTo(0,document.documentElement.scrollHeight),Ae(),A.emit("callEnde",H.from),K.current.destroy(),setTimeout((function(){window.location.reload()}),500)};Object(n.useEffect)((function(){return window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"}),H.isReceivingCall&&!v?(de.loop=!0,de.play()):(de.loop=!1,de.pause()),function(){de.loop=!1,setTimeout((function(){de.pause()}),500)}}),[H,v]),Object(n.useEffect)((function(){576>=window.innerWidth&&Ne(!0)}),[]);var De=function(){_e({screen1:!be.screen1,screen2:be.screen1})};Object(n.useEffect)((function(){if(Pe){var e=setInterval((function(){Se(Pe-1)}),1e3);return function(){return clearInterval(e)}}}),[Pe]);return Object(n.useEffect)((function(){void 0!==Z.current&&Z.current.play(),void 0!==Y.current&&Y.current.play()}),[we]),r.a.createElement("div",{className:"container",onClick:function(){Se(8)}},r.a.createElement(N.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),r.a.createElement("h1",{className:O.a.title_callOperator},"\u041f\u0435\u0440\u0435\u0432\u043e\u0434\u0447\u0438\u043a \u0436\u0435\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u044f\u0437\u044b\u043a\u0430"),r.a.createElement("div",{className:"Operators-row"},Oe?r.a.createElement("div",{className:O.a.modal_container+" "+"".concat(we&&O.a.is_open)},r.a.createElement("div",{className:O.a.modal_content},r.a.createElement("div",{className:O.a.video_operator+" "+O.a.video+" "+"".concat(be.screen2&&O.a.video_player_little),onClick:function(){De()}},r.a.createElement("video",{ref:Z,muted:!0,autoPlay:!0,className:O.a.video_player_user+" "+O.a.video_player})),v&&!w&&r.a.createElement("div",{className:O.a.video+" "+"".concat(be.screen1&&O.a.video_player_little),onClick:function(){De()}},r.a.createElement("video",{ref:Y,autoPlay:!0,className:O.a.video_player_operator+" "+O.a.video_player}),r.a.createElement("h6",{className:O.a.user_name},H.name," ",H.surname," "),r.a.createElement("h6",{className:O.a.user_name},H.email," ")),Pe&&r.a.createElement("div",{className:O.a.HangUp_div},r.a.createElement("button",{type:"button",className:O.a.call_btn_h,onClick:Te})))):r.a.createElement("div",{className:O.a.container},r.a.createElement("div",{className:O.a.operatot_video_row},r.a.createElement("div",{className:"col-6 p-2"},r.a.createElement("video",{playsInline:!0,ref:Z,muted:!0,autoPlay:!0,className:O.a.video_player_user+" "+O.a.video_player})),v&&!w&&r.a.createElement("div",{className:"col-6 p-2"},r.a.createElement("video",{ref:Y,autoPlay:!0,className:O.a.video_player_operator+" "+O.a.video_player}),r.a.createElement("h6",{className:O.a.user_name},H.name," ",H.surname," "))))),H.isReceivingCall&&!v&&r.a.createElement("div",{className:O.a.btn_call_text},r.a.createElement("p",{className:O.a.btn_call_name},H.name),r.a.createElement("button",{className:O.a.btn_call,onClick:function(){Ie()}},r.a.createElement("div",{className:O.a.btn_call__ico},r.a.createElement("i",{className:"fas fa-phone-alt"})))),r.a.createElement("div",{className:O.a.wraper_callBtn},v&&!w?r.a.createElement("div",{className:O.a.HangUp_div},r.a.createElement("button",{type:"button",className:O.a.call_btn_h,onClick:Te})):R.length?r.a.createElement("div",{className:O.a.HangUp_div},r.a.createElement("button",{type:"button",className:O.a.callBtn,onClick:function(){!function(e){ge.loop=!0,ge.play();var a=new x.a({initiator:!0,trickle:!1,stream:y});a.on("error",(function(e){console.log(e)})),a.on("signal",(function(a){A.emit("callUser",{userToCall:e,signalData:a,from:u,name:i,surname:m})})),a.on("stream",(function(e){ge.loop=!1,ge.pause(),Y.current.srcObject=e})),A.on("callAccepted",(function(e){_(!0),a.signal(e)})),K.current=a}(z),_(!0),576>=window.innerWidth&&ke(!0)}})):e.props?"":r.a.createElement("div",{className:O.a.HangUp_div},r.a.createElement("div",{className:"row"},r.a.createElement("h4",{className:O.a.title_callOperator_er},"\u043f\u0440\u043e\u0441\u0438\u043c \u043f\u043e\u0434\u043e\u0436\u0434\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043c\u0438\u043d\u0443\u0442 \u0432\u0441\u0435 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u044b \u0437\u0430\u043d\u044f\u0442\u044b"),r.a.createElement("h5",{className:O.a.title_callOperator_er},"\u043a\u043e\u0433\u0434\u0430 \u043f\u043e\u044f\u0432\u0438\u0442\u0441\u044f \u0437\u0435\u043b\u0435\u043d\u0430\u044f \u043a\u043d\u043e\u043f\u043a\u0430 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u0435\u0433\u043e \u0434\u043b\u044f \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u0435\u043d\u0438\u044f \u0432\u0438\u0434\u0435\u043e\u0437\u0432\u043e\u043d\u043a\u0430")))),r.a.createElement(S,{props:c}))},T=t(23),D=t(29),H=t(4),B=t.n(H),F=function(){var e=Object(n.useContext)(C),a=y(),t=a.loading,l=a.request,c=a.error,o=a.clearError,i=Object(n.useState)({username:"",surname:"",email:"",password:""}),m=Object(s.a)(i,2),u=m[0],p=m[1],d=Object(n.useState)({email:"",password:""}),g=Object(s.a)(d,2),v=g[0],b=g[1],_=Object(n.useState)(!0),E=Object(s.a)(_,2),h=E[0],O=E[1],j=Object(n.useState)({activebtn1:!0,activebtn2:!1}),x=Object(s.a)(j,2),w=x[0],k=x[1];Object(n.useEffect)((function(){c&&N.b.error("".concat(c),{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),o()}),[c,o]);var P=function(e){p(Object(D.a)({},u,Object(T.a)({},e.target.name,e.target.value)))},S=function(e){b(Object(D.a)({},v,Object(T.a)({},e.target.name,e.target.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(N.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),r.a.createElement("div",{className:"container mt-5"},r.a.createElement("div",{className:"row justify-content-center  align-content-center",style:{height:"100%",marginTop:"50px"}},r.a.createElement("div",{className:"col-md-offset-3 col-md-6 "},r.a.createElement("div",{className:B.a.tab,role:"tabpanel"},r.a.createElement("ul",{className:"nav "+B.a.nav_tabs,role:"tablist"},r.a.createElement("li",{role:"presentation",className:w.activebtn1?B.a.active:""},r.a.createElement("button",{"aria-controls":"home",role:"tab","data-toggle":"tab",onClick:function(){k({activebtn1:!0,activebtn2:!1})}},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443")),r.a.createElement("li",{role:"presentation",className:w.activebtn2?B.a.active:""},r.a.createElement("button",{href:"#Section2","aria-controls":"profile",role:"tab","data-toggle":"tab",onClick:function(){k({activebtn1:!1,activebtn2:!0})}},"\u0417\u0430\u044f\u0432\u043a\u0430 \u043d\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435"))),r.a.createElement("div",{className:B.a.tab_content+" tabs"},w.activebtn1?r.a.createElement("div",{role:"tabpanel",className:"tab-pane",id:"Section1"},r.a.createElement("form",{className:B.a.form_horizontal},r.a.createElement("div",{className:"form-group "+B.a.form_group},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Email"),r.a.createElement("input",{type:"email",className:"form-control "+B.a.form_control,id:"email",name:"email",value:v.email,onChange:S})),r.a.createElement("div",{className:B.a.form_group+" form-group "},r.a.createElement("label",{htmlFor:"exampleInputPassword1"},"\u043f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement("input",{type:"password",className:B.a.form_control+" form-control",id:"password",name:"password",value:v.password,onChange:S})),r.a.createElement("div",{className:"form-group "+B.a.form_group},r.a.createElement("div",{className:" form-check "+B.a.main_checkbox_+" form-check"},r.a.createElement("input",{className:"form-check-input",style:{marginLeft:"0px"},type:"checkbox",defaultChecked:h,onChange:function(){O(!h)}}),r.a.createElement("label",{className:"form-check-label",htmlFor:"flexCheckChecked"}," \u0437\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c \u043c\u0435\u043d\u044f"))),r.a.createElement("div",{className:"form-group forgot_pass"},r.a.createElement("button",{type:"submit",className:"btn btn-warning w-100",style:{fontWeight:"bold",color:"#fff",borderRadius:"20px"},disabled:t,onClick:function(){var a;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.awrap(l("/api/auth/login","POST",Object(D.a)({},v)));case 3:a=t.sent,e.login(a.token,a.userId,a.email,a.username,a.surname,h),setTimeout((function(){window.location.reload()}),500),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),null,null,[[0,8]])}},"\u0412\u043e\u0439\u0442\u0438")))):r.a.createElement("div",{role:"tabpanel",className:"tab-pane  ",id:"Section2"},r.a.createElement("form",{className:B.a.form_horizontal},r.a.createElement("div",{className:"form-group "+B.a.form_group},r.a.createElement("label",{htmlFor:"exampleInputEmail2"},"\u0438\u043c\u044f"),r.a.createElement("input",{placeholder:"\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0438\u043c\u044f",id:"exampleInputEmail2",type:"text",name:"username",className:"form-control "+B.a.form_control,value:u.username,onChange:P})),r.a.createElement("div",{className:B.a.form_group,style:{}},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"\u0444\u0430\u043c\u0438\u043b\u0438\u044f"),r.a.createElement("input",{placeholder:"\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0444\u0430\u043c\u0438\u043b\u0438\u044f",id:"exampleInputEmail1",type:"text",name:"surname",className:"form-control "+B.a.form_control,value:u.surname,onChange:P})),r.a.createElement("div",{className:B.a.form_group},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Email"),r.a.createElement("input",{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",id:"email",type:"text",name:"email",className:"form-control "+B.a.form_control,value:u.email,onChange:P})),r.a.createElement("div",{className:B.a.form_group+" form-group "},r.a.createElement("label",{htmlFor:"exampleInputPassword1"},"\u043f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement("input",{type:"password",className:B.a.form_control+" form-control",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",id:"password",name:"password",value:u.password,onChange:P})),r.a.createElement("div",{className:"form-group "+B.a.form_group},r.a.createElement("div",{className:" form-check "+B.a.main_checkbox_+" form-check"},r.a.createElement("input",{className:"form-check-input",style:{marginLeft:"0px"},type:"checkbox",id:"flexCheckChecked",defaultChecked:h,onChange:function(){O(!h)}}),r.a.createElement("label",{className:"form-check-label",htmlFor:"flexCheckChecked"}," \u0437\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c \u043c\u0435\u043d\u044f"))),r.a.createElement("div",{className:"form-group forgot_pass"},r.a.createElement("button",{type:"submit",className:"btn btn-warning w-100",onClick:function(){var e;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,f.a.awrap(l("/api/auth/register","POST",Object(D.a)({},u)));case 3:e=a.sent,N.b.info("".concat(e.message),{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),a.next=9;break;case 7:a.prev=7,a.t0=a.catch(0);case 9:case"end":return a.stop()}}),null,null,[[0,7]])},disabled:t,style:{fontWeight:"bold",color:"#fff",borderRadius:"20px"}},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")))))))))))},L=function(e){var a=e.props,t=Object(n.useState)({authenticated:!1,operator:!1,adm:!1}),l=Object(s.a)(t,2),c=l[0],m=l[1],u=JSON.parse(localStorage.getItem("userData")),p=Object(i.g)(),d=Object(n.useContext)(C);return Object(n.useEffect)((function(){m((function(e){var t=Object(D.a)({},e);switch(null!==a&&(t.authenticated=!0),u&&"admin@gmail.com"===u.userEmail&&(t.adm=!0),u&&u.userEmail){case"operator1@gmail.com":case"operator2@gmail.com":case"operator3@gmail.com":case"operator4@gmail.com":case"operator5@gmail.com":t.operator=!0}return t}))}),[a]),r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark  navbarbg"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement(o.c,{className:"navbar-brand",to:"/HomePage"},"\u0433\u043b\u0430\u0432\u043d\u0430\u044f"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarCollapse","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarCollapse"},r.a.createElement("ul",{className:"navbar-nav me-auto mb-2 mb-md-0"},u?c.operator?r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.c,{className:"nav-link",to:"/CallPage"},"\u043f\u0440\u0438\u0435\u043c \u0437\u0432\u043e\u043d\u043a\u043e\u0432")):r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.c,{className:"nav-link",to:"/CallPage"},"\u043f\u043e\u0437\u0432\u043e\u043d\u0438\u0442\u044c")):"",u&&c.adm?r.a.createElement(o.c,{className:"nav-link",to:"/AdminPanel"},"\u0430\u0434\u043c\u0438\u043d \u043f\u0430\u043d\u0435\u043b\u044c"):""),r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/AuthPage",onClick:function(e){e.preventDefault(),d.logout(),p.push("/AuthPage")}},u?"\u0432\u044b\u0439\u0442\u0438":"\u0432\u0445\u043e\u0434 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442")))))))},R=w.a.connect("https://kosg.su",{reconnection:!1}),U=function(e){var a=Object(n.useContext)(C).token,t=y().request,r=Object(n.useState)("\u043d\u0435 \u0432 \u0441\u0435\u0442\u0438"),l=Object(s.a)(r,2),c=l[0],o=l[1],i=Object(n.useState)(!1),m=Object(s.a)(i,2),u=m[0],p=m[1],d=Object(n.useState)([]),g=Object(s.a)(d,2),v=g[0],b=g[1],_=JSON.parse(localStorage.getItem("userData")).userEmail;Object(n.useEffect)((function(){return R.emit("createRoom",_),R.on("online_room",(function(e){b(e)})),function(){!0}}),[]),Object(n.useEffect)((function(){if(0==v.length)o("\u043d\u0435 \u0432 \u0441\u0435\u0442\u0438");else for(var a=v,t=0;t<a.length;t++){a[t].operator==="room".concat(e)&&o("online")}}),[v]);var E=Object(n.useCallback)((function(){var n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,f.a.awrap(t("/api/time/".concat(e),"GET",null,{Authorization:"Bearer ".concat(a)}));case 3:n=r.sent,p(n),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),N.b.error("".concat(r.t0),{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 10:case"end":return r.stop()}}),null,null,[[0,7]])}),[e,t,a]);return Object(n.useEffect)((function(){e&&E()}),[E,e]),{isActive:c,time:u,online_room:v,setOnline_room:b}},J=function(){var e=U(1).isActive,a=U(2).isActive,t=U(3).isActive,n=U(4).isActive,l=U(5).isActive,c=U(1).time,s=U(2).time,i=U(3).time,m=U(4).time,u=U(5).time;return r.a.createElement("div",{className:"container mt-5"},r.a.createElement(o.b,{style:{textDecoration:"none"},to:"/detailVideo/".concat(1),className:"col-xl-8 mt-3 adminLink"},r.a.createElement("div",{className:"row mt-3 p-3 d-flex flex-row list-group-item-primary align-self-center shadow-lg rounded-3 align-items-center"},r.a.createElement("h5",{className:"col-4 m-0"},"Operator1"),r.a.createElement("span",{className:"col-2 text-center text-success rounded-3"},e),r.a.createElement("p",{className:"col-6 m-0 text-center"},r.a.createElement("span",{className:"text-warning m-0 text-dark"},r.a.createElement(S,{props:c}))))),r.a.createElement(o.b,{style:{textDecoration:"none"},to:"/detailVideo/".concat(2),className:"col-xl-8 mt-3 adminLink"},r.a.createElement("div",{className:"row mt-3 p-3 d-flex flex-row list-group-item-primary align-self-center shadow-lg rounded-3 align-items-center"},r.a.createElement("h5",{className:"col-4 m-0"},"Operator1"),r.a.createElement("span",{className:"col-2 text-center text-success rounded-3"},a),r.a.createElement("p",{className:"col-6 m-0 text-center"},r.a.createElement("span",{className:"text-warning m-0 text-dark"},r.a.createElement(S,{props:s}))))),r.a.createElement(o.b,{style:{textDecoration:"none"},to:"/detailVideo/".concat(3),className:"col-xl-8 mt-3 adminLink"},r.a.createElement("div",{className:"row mt-3 p-3 d-flex flex-row list-group-item-primary align-self-center shadow-lg rounded-3 align-items-center"},r.a.createElement("h5",{className:"col-4 m-0"},"Operator3"),r.a.createElement("span",{className:"col-2 text-center text-success rounded-3"},t),r.a.createElement("p",{className:"col-6 m-0 text-center"},r.a.createElement("span",{className:"text-warning m-0 text-dark"},r.a.createElement(S,{props:i}))))),r.a.createElement(o.b,{style:{textDecoration:"none"},to:"/detailVideo/".concat(4),className:"col-xl-8 mt-3 adminLink"},r.a.createElement("div",{className:"row mt-3 p-3 d-flex flex-row list-group-item-primary align-self-center shadow-lg rounded-3 align-items-center"},r.a.createElement("h5",{className:"col-4 m-0"},"Operator4"),r.a.createElement("span",{className:"col-2 text-center text-success rounded-3"},n),r.a.createElement("p",{className:"col-6 m-0 text-center"},r.a.createElement("span",{className:"text-warning m-0 text-dark"},r.a.createElement(S,{props:m}))))),r.a.createElement(o.b,{style:{textDecoration:"none"},to:"/detailVideo/".concat(5),className:"col-xl-8 mt-3 adminLink"},r.a.createElement("div",{className:"row mt-3 p-3 d-flex flex-row list-group-item-primary align-self-center shadow-lg rounded-3 align-items-center"},r.a.createElement("h5",{className:"col-4 m-0"},"Operator5"),r.a.createElement("span",{className:"col-2 text-center text-success rounded-3"},l),r.a.createElement("p",{className:"col-6 m-0 text-center"},r.a.createElement("span",{className:"text-warning m-0 text-dark"},r.a.createElement(S,{props:u}))))))},M=function(){return r.a.createElement("div",{style:{display:"flex",justifyContent:"center",paddingTop:"2rem"}},r.a.createElement("div",{className:"preloader-wrapper active"},r.a.createElement("div",{className:"spinner-layer spinner-red-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"})))))},W=function(e){var a=e.links;return a.length?r.a.createElement(r.a.Fragment,null,a.map((function(e,a){return r.a.createElement("div",{key:a,className:"bg-light row mb-3",style:{maxWidth:"35rm"}},r.a.createElement("div",{className:"col-6"},r.a.createElement("ul",{className:"list-group"},r.a.createElement("div",null,"\u0414\u0430\u0442\u0430"),r.a.createElement("li",{className:"list-group-item text-sm"},new Date("".concat(e.date)).toLocaleDateString()),r.a.createElement("div",null,"\u0417\u0432\u043e\u043d\u043e\u043a \u043e\u0442"),r.a.createElement("li",{className:"list-group-item text-sm",style:{overflowY:"auto"}},e.callFrom))),r.a.createElement("div",{className:"col-6"},r.a.createElement("div",{className:"d-flex flex-column align-content-end"},r.a.createElement("ul",{className:"list-group w-100"},r.a.createElement("div",null,"\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"),r.a.createElement("li",{className:"list-group-item"},e.duration)),r.a.createElement("a",{className:"btn btn-primary text-sm mt-4",href:"https://kosg.su/static/".concat(e.videoName,".webm")},"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432\u0438\u0434\u0435\u043e"))))}))):r.a.createElement("h2",{className:"center"},"\u043d\u0435\u0442 \u0437\u0430\u043f\u0438\u0441\u0438")},q=function(){var e=Object(i.h)().id,a=Object(n.useState)([]),t=Object(s.a)(a,2),l=t[0],c=t[1],o=y(),m=o.loading,u=o.request,p=Object(n.useContext)(C).token,d=Object(n.useState)(""),g=Object(s.a)(d,2),v=g[0],b=g[1],_=Object(n.useState)([]),E=Object(s.a)(_,2),h=E[0],O=E[1],j=Object(n.useCallback)((function(){var a;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.awrap(u("/api/video/operator/".concat(e),"GET",null,{Authorization:"Bearer ".concat(p)}));case 3:a=t.sent,c(a),console.log(a),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),N.b.error("".concat(t.t0),{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 11:case"end":return t.stop()}}),null,null,[[0,8]])}),[p,u,e]);Object(n.useEffect)((function(){j()}),[j]),Object(n.useEffect)((function(){O(l.filter((function(e){return e.callFrom&&e.callFrom.toLowerCase().includes(v.toLowerCase())})))}),[v,l]);return m?r.a.createElement(M,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("input",{className:"form-control mb-4 mt-4",id:"tableSearch",type:"text",placeholder:"Type something to search list items",value:v,onChange:function(e){e.preventDefault(),b(e.target.value)}})),!m&&r.a.createElement(W,{links:h})))},G=function(e){var a=Object(n.useState)(null),t=Object(s.a)(a,2),l=t[0],c=t[1],o=JSON.parse(localStorage.getItem("userData"));return Object(n.useEffect)((function(){var e=!0;switch(o&&o.userEmail){case"operator1@gmail.com":e&&c({operator:1});break;case"operator2@gmail.com":e&&c({operator:2});break;case"operator3@gmail.com":e&&c({operator:3});break;case"operator4@gmail.com":e&&c({operator:4});break;case"operator5@gmail.com":e&&c({operator:5})}return function(){e=!1}}),[0]),e?r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{props:l}),r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/CallPage"},r.a.createElement(I,{props:l})),r.a.createElement(i.b,{path:"/AdminPanel",exact:!0},r.a.createElement(J,null)),r.a.createElement(i.b,{path:"/detailVideo/:id"},r.a.createElement(q,null)),r.a.createElement(i.a,{to:"/HomePage"})),r.a.createElement(i.b,{path:"/HomePage",exact:!0},r.a.createElement(p,null))):r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{props:l}),r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/HomePage",exact:!0},r.a.createElement(p,null)),r.a.createElement(i.b,{path:"/AuthPage",exact:!0},r.a.createElement(F,null)),r.a.createElement(i.a,{to:"/HomePage"})))},z=function(){var e=Object(n.useState)(null),a=Object(s.a)(e,2),t=a[0],r=a[1],l=Object(n.useState)(!1),c=Object(s.a)(l,2),o=c[0],i=c[1],m=Object(n.useState)(null),u=Object(s.a)(m,2),p=u[0],d=u[1],g=Object(n.useState)(null),f=Object(s.a)(g,2),v=f[0],b=f[1],_=Object(n.useCallback)((function(e,a,t,n,l,c){r(e),d(a),b(t),c&&localStorage.setItem("userData",JSON.stringify({userId:a,token:e,username:n,usersurname:l,userEmail:t}))}),[]),E=Object(n.useCallback)((function(){r(null),d(null),b(null),localStorage.removeItem("userData")}),[]);return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&_(e.token,e.userId,e.userEmail),i(!0)}),[_]),{login:_,logout:E,token:t,userId:p,ready:o,userEmail:v}};t(107),t(108);var V=function(){var e=z(),a=e.token,t=e.login,n=e.logout,l=e.userId,c=e.ready,s=e.userEmail,i=!!a,m=G(i);return c?r.a.createElement(C.Provider,{value:{token:a,login:t,logout:n,userId:l,isAuthenticated:i,userEmail:s}},r.a.createElement(o.a,null,m)):r.a.createElement(M,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},2:function(e,a,t){e.exports={title_callOperator:"CallPage_title_callOperator__21gFc",title_callOperator_er:"CallPage_title_callOperator_er__2Bt9P",container:"CallPage_container__2JbY-",video_row:"CallPage_video_row__lF8uT",video:"CallPage_video__2S1Z6",video_player:"CallPage_video_player__1tEDy",user_name:"CallPage_user_name__2ZxNZ",HangUp_div:"CallPage_HangUp_div__DZu0t",operatot_video_row:"CallPage_operatot_video_row__3GyDw",call_btn_h:"CallPage_call_btn_h__32WUM",callBtn:"CallPage_callBtn__35jlj",btn_call_text:"CallPage_btn_call_text__243qg",btn_call_name:"CallPage_btn_call_name__2v_-k",btn_call:"CallPage_btn_call__nk4hg",hoverWave:"CallPage_hoverWave__1iEY-",wraper_callBtn:"CallPage_wraper_callBtn__1oZZK",video_player_operator:"CallPage_video_player_operator__1BSLS",video_operator:"CallPage_video_operator__h-PSa",video_player_user:"CallPage_video_player_user__2jGKz",video_player_little:"CallPage_video_player_little__1O0g5",modal_container:"CallPage_modal_container__3Ej6m",is_open:"CallPage_is_open__1yGaj",modal_content:"CallPage_modal_content__1W_SB",close:"CallPage_close__3XJa1",btn_call__ico:"CallPage_btn_call__ico__3Ht6l","btn-call__ico":"CallPage_btn-call__ico__rAniN",shake:"CallPage_shake__2qA5I"}},4:function(e,a,t){e.exports={nav_link:"AuthPage_nav_link__2_x8Z",active:"AuthPage_active__1qPOq",tab:"AuthPage_tab__15AFY",nav_tabs:"AuthPage_nav_tabs__3gjUK",tab_content:"AuthPage_tab_content__1iGXm","form-bg":"AuthPage_form-bg__2mYEn",form_horizontal:"AuthPage_form_horizontal__27vTV",form_group:"AuthPage_form_group__1nXGl",form_control:"AuthPage_form_control__2JhSL",main_checkbox:"AuthPage_main_checkbox__1G21U",text:"AuthPage_text__6h3LN",btn:"AuthPage_btn__1pT8A",forgot_pass:"AuthPage_forgot_pass__20NJc"}},57:function(e,a,t){e.exports={title:"HomePage_title__3_ieP"}},60:function(e,a,t){e.exports=t.p+"static/media/skayp-call.8a6a4544.mp3"},61:function(e,a,t){e.exports=t.p+"static/media/toot.1e3e7b81.mp3"},63:function(e,a,t){e.exports=t(109)},96:function(e,a){},98:function(e,a){}},[[63,1,2]]]);
//# sourceMappingURL=main.34c860f0.chunk.js.map