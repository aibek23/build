{"version":3,"sources":["pages/HomePage.js","context/Context.js","hooks/http.hook.js","hooks/StopWatch.hook.js","components/Timer.js","pages/CallPage.js","hooks/random.string.hook.js","pages/AuthPage.js","components/Header.js","hooks/OnlineRoom.hook.js","pages/AdminPanel.js","components/Loader.js","components/LinksList.js","pages/VideoPage.js","routes.js","hooks/auth.hook.js","App.js","serviceWorker.js","index.js","css/CallPage.module.css","css/AuthPage.module.css","css/HomePage.module.css","audeo/skayp-call.mp3","audeo/toot.mp3"],"names":["HomePage","className","styles","title","to","noop","Context","createContext","token","userEmail","userId","login","logout","isAuthenticated","online_room","setOnline_room","useHttp","useState","loading","setLoading","error","setError","request","useCallback","url","a","async","method","body","headers","JSON","stringify","fetch","response","json","data","ok","Error","message","clearError","useStopWatch","initialState","auth","useContext","isActive","setIsActive","isPaused","setIsPaused","time","setTime","useEffect","interval","setInterval","clearInterval","toast","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","handleStart","handlePauseResume","username","call","duration","videoName","callFrom","Authorization","console","log","Timer","props","seconds","parseInt","hours","Math","floor","minutes","socket","openSocket","connect","reconnection","CallPage","parse","localStorage","getItem","name","surname","usersurname","email","callAccepted","setCallAccepted","callEnded","stream","setStream","setCall","setBusy__room","operatorId","setOperatorId","myVideo","useRef","userVideo","connectionRef","socketRef","screenStream","setScreenStream","voiceStream","setVoiceStream","setRecording","mediaRecorder","dataChunks","operatorId_mongo","Date","toLocaleDateString","replace","toLocaleTimeString","length","mask","result","i","round","random","useRandomString","Audeo_Call","Audio","ringtony","Toot_Call","toot","screen1","screen2","tabPanes","setTabPanes","mScreen","setMSreen","modal","setModal","callEndeBtnM","setCallEndeBtnM","stopRecording","current","from","emit","getMediaDevices","navigator","mediaDevices","getUserMedia","video","audio","srcObject","room","operator","getDisplayMedia","then","catch","err","on","callerName","signal","isReceivingCall","setTimeout","window","location","reload","e","rand","id","answerCall","mediaStream","MediaStream","getVideoTracks","getAudioTracks","MediaRecorder","ondataavailable","push","onstop","start","startRecording","loop","pause","peer","Peer","initiator","trickle","destroy","onerror","msg","lineNo","columnNo","leaveCall","scrollTo","document","documentElement","scrollHeight","top","behavior","play","innerWidth","tabPane1","intervalId","onClick","newestOnTop","rtl","pauseOnFocusLoss","title_callOperator","modal_container","is_open","modal_content","video_operator","video_player_little","ref","muted","autoPlay","video_player_user","video_player","video_player_operator","user_name","HangUp_div","type","call_btn_h","container","operatot_video_row","playsInline","btn_call_text","btn_call_name","btn_call","btn_call__ico","wraper_callBtn","callBtn","userToCall","signalData","callUser","title_callOperator_er","AuthPage","password","form","setForm","formL","setFormL","checkbox","setcheckbox","activebtn1","activebtn2","changeHandler","event","target","value","changeHandlerL","style","tab","role","nav_tabs","active","aria-controls","data-toggle","href","tab_content","form_horizontal","form_group","htmlFor","form_control","onChange","main_checkbox_","defaultChecked","disabled","placeholder","info","Header","authenticated","adm","state","setState","history","useHistory","prevState","newState","data-bs-toggle","data-bs-target","aria-expanded","aria-label","preventDefault","useOnlineRoom","online","index","fetchLinks","fetched","AdminPanel","isActive1","isActive2","isActive3","isActive4","isActive5","time1","time2","time3","time4","time5","Loader","display","justifyContent","paddingTop","LinksList","links","map","element","key","date","VideoPage","operatorRoomId","useParams","videoPath","setVideoPath","filteredVideoPath","setFilteredVideoPath","filter","link","toLowerCase","includes","useRoutes","setOperator","isMounted","path","exact","useAuth","setToken","ready","setReady","setUserId","setUserEmail","jwtToken","useremail","setItem","removeItem","App","routes","Provider","Boolean","hostname","match","ReactDOM","render","getElementById","serviceWorker","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.34c860f0.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { Link } from 'react-router-dom'\r\nimport styles from \"../css/HomePage.module.css\"\r\n\r\nexport const HomePage = () => {\r\n\r\n    return(\r\n    <div className=\"Home_Page\">\r\n        <div className=\"blur\">  \r\n        <div className=\"container\">\r\n            <div className={styles.title}>\r\n            <h2>kosg.su</h2>\r\n            <h4>сервис дистанционного сурдоперевода, который позволяет организациям обеспечивать доступную среду для инвалидов по слуху с минимальными затратами, а глухим получить доступ к коммуникациям наравне со всеми.</h4>\r\n            <Link className=\"nav-link\" to=\"/\" >выйти</Link>\r\n            </div>\r\n        </div>\r\n        </div>\r\n    </div>\r\n    )\r\n\r\n}","import {createContext} from 'react'\r\n\r\nfunction noop() {}\r\n\r\nexport const Context = createContext({\r\n  token: null,\r\n  userEmail:null,\r\n  userId: null,\r\n  login: noop,\r\n  logout: noop,\r\n  isAuthenticated: false,\r\n  online_room:[], \r\n  setOnline_room :noop,\r\n})\r\n\r\n// export const Online = createContext({\r\n//  online:null,\r\n// })","import {useState, useCallback} from 'react'\r\n\r\nexport const useHttp = () => {\r\n  const [loading, setLoading] = useState(false)\r\n  const [error, setError] = useState(null)\r\n\r\n  const request = useCallback(async (url, method = 'GET', body = null, headers = {}) => {\r\n    setLoading(true)\r\n    try {\r\n      if (body) {\r\n        body = JSON.stringify(body)\r\n        headers['Content-Type'] = 'application/json'\r\n      }\r\n\r\n      const response = await fetch(url, {method, body, headers})\r\n      const data = await response.json()\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.message || 'Что-то пошло не так')\r\n      }\r\n\r\n      setLoading(false)\r\n\r\n      return data\r\n    } catch (e) {\r\n      setLoading(false)\r\n      setError(e.message)\r\n      throw e\r\n    }\r\n  }, [])\r\n\r\n  const clearError = useCallback(() => setError(null), [])\r\n\r\n  return { loading, request, error, clearError }\r\n}\r\n","import {useState, useEffect ,useContext } from 'react';\r\nimport {toast} from 'react-toastify'\r\nimport {Context} from '../context/Context'\r\nimport { useHttp } from './http.hook';\r\nexport  const useStopWatch = (initialState = 0) => {\r\n    const {request, error, clearError} = useHttp();\r\n    const auth = useContext(Context)\r\n    const [isActive, setIsActive] = useState(false);\r\n    const [isPaused, setIsPaused] = useState(true);\r\n    const [time, setTime] = useState(initialState);\r\n    \r\n    useEffect(() => {\r\n      let interval = null;\r\n      if (isActive && isPaused === false) {\r\n        interval = setInterval(() => {\r\n          setTime((time) => time + 1);\r\n        }, 1000);\r\n      } else {\r\n        clearInterval(interval);\r\n      }\r\n      return () => {\r\n        clearInterval(interval);\r\n      };\r\n    }, [isActive, isPaused]);\r\n\r\n    useEffect(() => {\r\n      error&&toast.error(`${error}`, {\r\n        position: \"top-right\",\r\n        autoClose: 5000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n        });\r\n      clearError()\r\n    }, [error, clearError])\r\n    \r\n    const handleStart = () => {\r\n      setIsActive(true);\r\n      setIsPaused(false);\r\n    };\r\n    \r\n    const handlePauseResume = async (username , call) => {\r\n      setIsPaused(!isPaused);\r\n      try {\r\n\r\n         await request('/api/time/save', 'POST', {duration: time, videoName: username , callFrom:call}, {\r\n          Authorization: `Bearer ${auth.token}`\r\n        })\r\n      } catch (e) {console.log(e)}\r\n    };\r\n    \r\n  return {\r\n    handleStart,handlePauseResume,time\r\n};\r\n};\r\n\r\nexport default useStopWatch;","// import \"./Timer.css\";\r\nexport default function Timer(props) {\r\n\r\n\tif (!props.props) {\r\n\t\treturn `0h:0m:0s`\r\n\t}\r\n\r\n\tvar seconds = parseInt(props.props, 10); // don't forget the second param\r\n    var hours   = Math.floor(seconds / 3600);\r\n    var minutes = Math.floor((seconds - (hours * 3600)) / 60);\r\n    seconds = seconds - (hours * 3600) - (minutes * 60);\r\n\r\n    if (hours   < 10) {hours   = \"0\"+hours;}\r\n    if (minutes < 10) {minutes = \"0\"+minutes;}\r\n    if (seconds < 10) {seconds = \"0\"+seconds;}\r\n\treturn `${hours}h:${minutes}m:${seconds}s`\r\n}\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport ringtony from \"../audeo/skayp-call.mp3\"\r\nimport toot from \"../audeo/toot.mp3\"\r\nimport styles from \"../css/CallPage.module.css\";\r\nimport {toast, ToastContainer} from 'react-toastify'\r\nimport Peer from 'simple-peer';\r\nimport openSocket from 'socket.io-client';\r\nimport 'react-toastify/dist/ReactToastify.css'\r\nimport useStopWatch  from \"../hooks/StopWatch.hook\";\r\nimport Timer from \"../components/Timer\";\r\nimport { useRandomString } from \"../hooks/random.string.hook\";\r\nconst socket = openSocket.connect('https://kosg.su', { reconnection: false })\r\n// const socket = openSocket.connect('http://localhost:5000', { reconnection: false })\r\nexport const CallPage = (props) => {\r\nconst {handleStart,handlePauseResume,time} = useStopWatch(0);\r\n  \r\n  const data = JSON.parse(localStorage.getItem('userData'));\r\n  const name = data.username;\r\n  const surname = data.usersurname;\r\n  const email = data.userEmail;\r\n  const [callAccepted, setCallAccepted] = useState(false);\r\n  const [callEnded, setCallEnded] = useState(false);\r\n  const [stream, setStream] = useState();\r\n  const [call, setCall] = useState({});\r\n  const [online_room, setOnline_room] = useState([]);\r\n  const [busy__room, setBusy__room] = useState(true);\r\n  const [operatorId, setOperatorId] = useState();\r\n\r\n  const myVideo = useRef();\r\n  const userVideo = useRef();\r\n  const connectionRef = useRef();\r\n  const socketRef = useRef(socket);\r\n  \r\n  const [screenStream, setScreenStream] = useState(null);\r\n  const [voiceStream, setVoiceStream] = useState(null);\r\n  const [recording, setRecording] = useState(false);\r\n  // const [loading, setLoading] = useState(true);\r\n  let mediaRecorder = null;\r\n  let dataChunks = [];\r\n  let room;\r\n  let operatorId_mongo = data.userId;\r\n  const username = useRef(`${name}_${operatorId_mongo}_${new Date().toLocaleDateString().replace(/\\./g, '')}_${new Date().toLocaleTimeString().replace(/\\:/g, '')}_${useRandomString(8)}`);\r\n  const Audeo_Call = new Audio(ringtony);\r\n  const Toot_Call = new Audio(toot);\r\n\r\n  //style\r\n  const [tabPanes, setTabPanes] = useState({ screen1: true, screen2: false });\r\n  const [mScreen, setMSreen] = useState(false);\r\n  const [modal , setModal] = useState(false);\r\n  const [callEndeBtnM, setCallEndeBtnM ] = useState(100)\r\n\r\n  useEffect(() => {\r\n    const getMediaDevices = async () => {\r\n      try {\r\n        const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });\r\n        setStream(stream);\r\n        myVideo.current.srcObject = stream;\r\n      } catch (err) {\r\n        console.log(\"An error occurred: \" + err);\r\n      }\r\n    };\r\n    if (props.props) {\r\n      const room = 'room' + props.props.operator;\r\n      socketRef.current.emit('user:connect', username.current);\r\n      getMediaDevices();\r\n      navigator.mediaDevices.getDisplayMedia({ video: true })\r\n        .then((screenStream) => setScreenStream(screenStream))\r\n        .catch((err) => console.log(\"An error occurred while getting screen media: \" + err));\r\n      navigator.mediaDevices.getUserMedia({ audio: true })\r\n        .then((voiceStream) => setVoiceStream(voiceStream))\r\n        .catch((err) => console.log(\"An error occurred while getting audio media: \" + err));\r\n      socket.emit('createRoom', email, room, operatorId_mongo);\r\n      socket.on('callUser', ({ from, name: callerName, signal, surname }) => {\r\n        setCall({ isReceivingCall: true, from, name: callerName, signal, surname });\r\n      });\r\n    } else {\r\n      socket.emit('createRoom', email);\r\n      socket.on('busy__room', (data) => { setBusy__room(data); });\r\n      socket.on('online_room', (data) => { setOnline_room(data); });\r\n      getMediaDevices();\r\n    }\r\n    socket.on('update', data => console.log(data));\r\n    socket.on('connect_error', err => {\r\n      console.log(err);\r\n      setTimeout(() => { window.location.reload(); }, 500);\r\n    });\r\n    socket.on('disconnect', () => { window.location.reload(); });\r\n    socket.on('callEndeMessage', (e) => { window.location.reload(); console.log(e);});\r\n    socket.on('callUser', ({ from, name: callerName, signal }) => {\r\n      setCall({ isReceivingCall: true, from, name: callerName, signal });\r\n    });\r\n\r\n  }, [props.props, email]);\r\n\r\n  useEffect(() => {\r\n    var rand = Math.floor(Math.random() * online_room.length);\r\n    if (online_room[rand]) {\r\n      let id = online_room[rand]\r\n      setOperatorId(id.operator)\r\n      console.log(online_room);\r\n      setBusy__room(false);\r\n    }\r\n  },[online_room]);\r\n\r\n  // let mediaRecorder;\r\n  // let dataChunks = [];\r\n\r\n  function startRecording() {\r\n    if (screenStream && voiceStream && !mediaRecorder) {\r\n      setRecording(true);\r\n      handleStart();\r\n      let mediaStream;\r\n      if (voiceStream === 'unavailable') {\r\n        mediaStream = screenStream;\r\n      } else {\r\n        mediaStream = new MediaStream([\r\n            ...screenStream.getVideoTracks(),\r\n            ...voiceStream.getAudioTracks()\r\n        ]);\r\n      }\r\n      mediaRecorder = new MediaRecorder(mediaStream);\r\n      mediaRecorder.ondataavailable = ({ data }) => {\r\n        dataChunks.push(data);\r\n        socketRef.current.emit('screenData:start', {\r\n          username: username.current,\r\n          data\r\n        });\r\n      };\r\n      mediaRecorder.onstop = stopRecording;\r\n      mediaRecorder.start(150);\r\n    }\r\n  }\r\n\r\n  function stopRecording() {\r\n    handlePauseResume(username.current, call.from);\r\n    setRecording(false);\r\n    socketRef.current.emit('screenData:end', username.current);\r\n    mediaRecorder = null;\r\n    dataChunks = [];\r\n  }\r\n  const answerCall = () => {\r\n\r\n    startRecording();\r\n    Audeo_Call.loop = false;\r\n    Audeo_Call.pause();\r\n    setCallAccepted(true);\r\n    const peer = new Peer({ initiator: false,  trickle: false, stream: stream });\r\n    peer.on('signal', (data) => {\r\n      socket.emit('answerCall', { signal: data, to: call.from ,room:'room' + props.props.operator});\r\n    });\r\n    peer.on('stream', data => {\r\n      userVideo.current.srcObject  = data;\r\n    });\r\n    peer.on('error', (err) => {\r\n      console.log(err);\r\n      if(err=\"RTCError: User-Initiated Abort, reason=Close called\"){\r\n        toast.error(`связь прервана №${err.message}`, {\r\n          position: \"top-right\",\r\n          autoClose: 2000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n          });\r\n        stopRecording();\r\n        socket.emit('callEnde', call.from);\r\n        connectionRef.current.destroy();\r\n        setTimeout(() => {\r\n          window.location.reload();\r\n        }, 500);\r\n      }\r\n      })\r\n    peer.signal(call.signal);\r\n    connectionRef.current = peer;\r\n  };\r\n\r\n  const callUser = (id) => {\r\n    Toot_Call.loop = true;\r\n    Toot_Call.play();\r\n    const peer = new Peer({ initiator: true, trickle: false, stream: stream });\r\n\r\n    peer.on('error', (err) => {console.log(err);})\r\n    peer.on('signal', (data) => {\r\n      socket.emit('callUser', { userToCall: id, signalData: data, from: email, name:name, surname:surname});\r\n    });\r\n    peer.on('stream', (data) => {\r\n      Toot_Call.loop = false;\r\n      Toot_Call.pause();\r\n      userVideo.current.srcObject = data;\r\n    });\r\n    socket.on('callAccepted', (signal) => {\r\n      setCallAccepted(true);\r\n      peer.signal(signal);\r\n    });\r\n    connectionRef.current = peer;\r\n  };\r\n\r\n\r\n\r\n  window.onerror = function(msg, url, lineNo, columnNo, error) {\r\n    // ... обработка ошибки ...\r\n   if(msg==='Uncaught Error: Connection failed.'){\r\n    stopRecording();\r\n    toast.error(`Connection failed`, {\r\n      position: \"top-right\",\r\n      autoClose: 2000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n      progress: undefined,\r\n      });\r\n    setTimeout(() => {\r\n      window.location.reload();\r\n    }, 500);\r\n   }\r\n    return false;\r\n  }\r\n\r\n  const leaveCall = () => {\r\n    window.scrollTo(0,document.documentElement.scrollHeight)\r\n    stopRecording();\r\n    socket.emit('callEnde', call.from);\r\n    connectionRef.current.destroy();\r\n    setTimeout(() => {\r\n      window.location.reload();\r\n    }, 500);\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });\r\n    if (call.isReceivingCall&&!callAccepted) {\r\n      Audeo_Call.loop = true;\r\n      Audeo_Call.play();\r\n    } else {\r\n      Audeo_Call.loop = false;\r\n      Audeo_Call.pause();\r\n    }\r\n    // Clean up the effect\r\n    return () => {\r\n      Audeo_Call.loop = false;\r\n      setTimeout(() => {\r\n        Audeo_Call.pause();\r\n      }, 500);\r\n   \r\n    };\r\n  }, [call,callAccepted]);\r\n  //style\r\n\r\n  useEffect(()=>{\r\n  if(576>=window.innerWidth){\r\n  setMSreen(true)\r\n  }},[])\r\n\r\n  var openModal = function() {\r\n    if(576>=window.innerWidth){\r\n      setModal(true)\r\n    }\r\n  }\r\n  const tabPane1 = () => {\r\n    setTabPanes({ screen1: !tabPanes.screen1, screen2: tabPanes.screen1 })\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!callEndeBtnM) return;\r\n    const intervalId = setInterval(() => {\r\n      setCallEndeBtnM(callEndeBtnM - 1);\r\n    }, 1000);\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, [callEndeBtnM]);\r\n  const callBtnFunc = () => {\r\n    setCallEndeBtnM(8)\r\n    }\r\n    useEffect(() => {\r\n      if (myVideo.current !== undefined) {\r\n        myVideo.current.play()\r\n      }\r\n      if (userVideo.current !== undefined) {\r\n        userVideo.current.play()\r\n      }\r\n    }, [modal]);\r\n  return (\r\n    <div className=\"container\" onClick={()=>callBtnFunc()}>\r\n            <ToastContainer\r\n              position=\"top-right\"\r\n              autoClose={5000}\r\n              hideProgressBar={false}\r\n              newestOnTop={false}\r\n              closeOnClick\r\n              rtl={false}\r\n              pauseOnFocusLoss\r\n              draggable\r\n              pauseOnHover\r\n            />\r\n      <h1 className={styles.title_callOperator} >Переводчик жестового языка</h1>\r\n      <div className=\"Operators-row\" >\r\n        {mScreen?\r\n        <div className={styles.modal_container + \" \" + `${modal&&styles.is_open}`}>\r\n        <div className={styles.modal_content} >\r\n              <div className={styles.video_operator + \" \" +styles.video + \" \" + `${tabPanes.screen2 && styles.video_player_little}`} onClick={() => { tabPane1() }}>\r\n                <video  ref={myVideo} muted autoPlay  className={styles.video_player_user+\" \"+styles.video_player} />\r\n              </div>\r\n              {callAccepted && !callEnded && (\r\n                  <div className={styles.video + \" \" + `${tabPanes.screen1 && styles.video_player_little}`} onClick={() => { tabPane1() }}>\r\n                  <video  ref={userVideo} autoPlay className={styles.video_player_operator + ' ' + styles.video_player}></video>\r\n                    <h6 className={styles.user_name}>{call.name} {call.surname} </h6>\r\n                  <h6 className={styles.user_name}>{call.email} </h6>\r\n                </div> \r\n              )}\r\n              {callEndeBtnM&&\r\n              <div className={styles.HangUp_div}>\r\n                <button type=\"button\" className={styles.call_btn_h} onClick={leaveCall}>\r\n                  {/* Hang Up */}\r\n                </button>\r\n              </div>\r\n              }\r\n        </div>\r\n      </div>\r\n      :\r\n      <div className={styles.container}>\r\n        <div className={styles.operatot_video_row}>\r\n          \r\n              <div className=\"col-6 p-2\">\r\n                <video playsInline ref={myVideo} muted autoPlay className={styles.video_player_user+\" \"+styles.video_player} />\r\n              </div>\r\n              \r\n              {callAccepted && !callEnded && (\r\n                      <div className=\"col-6 p-2\">\r\n                        <video  ref={userVideo} autoPlay className={styles.video_player_operator + ' ' + styles.video_player}></video>\r\n                        <h6 className={styles.user_name}>{call.name} {call.surname} </h6>\r\n                        {/* <h6 className={styles.user_name}>{call.email} </h6> */}\r\n                      </div>\r\n              )}\r\n             </div>\r\n      </div>}\r\n      </div>\r\n      {call.isReceivingCall && !callAccepted && (\r\n        <div  className={styles.btn_call_text}>\r\n          <p className={styles.btn_call_name}>{call.name}</p> \r\n          <button className={styles.btn_call} onClick={()=>{answerCall()}}>\r\n            <div className={styles.btn_call__ico}>\r\n              <i className=\"fas fa-phone-alt\"></i>\r\n            </div>\r\n        </button>\r\n        </div>\r\n      )}\r\n      <div className={styles.wraper_callBtn}>\r\n      {callAccepted && !callEnded ? (\r\n             <div className={styles.HangUp_div}>\r\n                <button type=\"button\" className={styles.call_btn_h} onClick={leaveCall}>\r\n                  {/* Hang Up */}\r\n                </button>\r\n              </div>\r\n        ) : (online_room.length?\r\n              <div className={styles.HangUp_div}>\r\n                <button type=\"button\" className={styles.callBtn} onClick={() => { callUser(operatorId); setCallAccepted(true); openModal();}}>\r\n                   {/* Hang D */}\r\n                </button>\r\n              </div>:props.props?\"\":<div className={styles.HangUp_div}>\r\n                <div className=\"row\">\r\n                  <h4 className={styles.title_callOperator_er} >просим подождать несколько минут все операторы заняты</h4>\r\n                  <h5 className={styles.title_callOperator_er} >когда появится зеленая кнопка нажмите его для осуществления видеозвонка</h5>\r\n                  </div>\r\n              </div>\r\n            )}\r\n      </div>\r\n      <Timer props={time}/>\r\n    </div>\r\n  )\r\n}","export function useRandomString(length) {\r\n    var mask = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'; \r\n    var result = '';\r\n    for (var i = length; i > 0; --i) result += mask[Math.round(Math.random() * (mask.length - 1))];\r\n    return result;\r\n}","import React, {useContext, useEffect, useState} from 'react'\r\nimport {useHttp} from '../hooks/http.hook'\r\nimport {Context} from '../context/Context'\r\nimport {toast, ToastContainer} from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.css'\r\nimport styles from '../css/AuthPage.module.css'\r\n\r\nexport const AuthPage = () => {\r\n  const auth = useContext(Context)\r\n  const {loading, request, error, clearError} = useHttp()\r\n  // const [errorMessage, useerrorMessage] = useState(\" \")\r\n  const [form, setForm] = useState({\r\n    username: '',surname: '',email: '', password: ''\r\n  })\r\n  const [formL, setFormL] = useState({\r\n   email: '', password: ''\r\n  })\r\n   const [checkbox, setcheckbox] = useState(true)\r\n  const [tabPanes, setTabPanes] = useState({activebtn1:true,activebtn2:false});\r\n\r\n  useEffect(() => {\r\n    error&&toast.error(`${error}`, {\r\n      position: \"top-right\",\r\n      autoClose: 5000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n      progress: undefined,\r\n      });\r\n    clearError()\r\n  }, [error, clearError])\r\n\r\n  // useEffect(() => {\r\n  //   window.M.updateTextFields()\r\n  // }, [])\r\n  const changeHandler = event => {\r\n    setForm({ ...form, [event.target.name]: event.target.value })\r\n  }\r\n  const changeHandlerL = event => {\r\n    setFormL({ ...formL, [event.target.name]: event.target.value })\r\n  }\r\n  const registerHandler = async () => {\r\n    try {\r\n      const data = await request('/api/auth/register', 'POST', {...form})\r\n      toast.info(`${data.message}`, {\r\n        position: \"top-right\",\r\n        autoClose: 5000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n        });\r\n   \r\n    } catch (e) {}\r\n  }\r\n  const loginHandler = async () => {\r\n    // console.log({...form});\r\n    try {\r\n      const data = await request('/api/auth/login', 'POST', {...formL})\r\n      auth.login(data.token, data.userId , data.email, data.username, data.surname, checkbox)\r\n      setTimeout(() => {\r\n        window.location.reload();\r\n      }, 500);\r\n    } catch (e) {}\r\n  }\r\n  const tabPane1 = () =>{\r\n    setTabPanes({activebtn1:true,activebtn2:false})\r\n  }\r\n  const tabPane2 = () =>{\r\n    setTabPanes({activebtn1:false,activebtn2:true})\r\n  }\r\n  return (<>\r\n  {/* < Header props={null} /> */}\r\n    <div >\r\n      <ToastContainer\r\n          position=\"top-right\"\r\n        autoClose={5000}\r\n        hideProgressBar={false}\r\n        newestOnTop={false}\r\n        closeOnClick\r\n        rtl={false}\r\n        pauseOnFocusLoss\r\n        draggable\r\n        pauseOnHover\r\n  />\r\n      <div className=\"container mt-5\" >\r\n      <div className=\"row justify-content-center  align-content-center\" style={{\"height\":\"100%\",\"marginTop\":\"50px\"}}>\r\n      <div className=\"col-md-offset-3 col-md-6 \">\r\n\r\n         <div className={styles.tab} role=\"tabpanel\">\r\n            <ul className={\"nav \"+styles.nav_tabs} role=\"tablist\">\r\n              <li role=\"presentation\" className={tabPanes.activebtn1?styles.active:\"\"}><button aria-controls=\"home\" role=\"tab\" data-toggle=\"tab\" onClick={()=>tabPane1()}>Войти в систему</button></li>\r\n              <li role=\"presentation\" className={tabPanes.activebtn2?styles.active:\"\"} ><button href=\"#Section2\" aria-controls=\"profile\" role=\"tab\" data-toggle=\"tab\" onClick={()=>tabPane2()}>Заявка на подключение</button></li>\r\n            </ul>\r\n            <div className={styles.tab_content+\" tabs\"}>{tabPanes.activebtn1?\r\n              <div role=\"tabpanel\" className=\"tab-pane\" id=\"Section1\" >\r\n                <form className={styles.form_horizontal}>\r\n                  <div className={\"form-group \"+ styles.form_group}>\r\n                    <label htmlFor=\"exampleInputEmail1\">Email</label>\r\n                    <input type=\"email\" className={\"form-control \" + styles.form_control}                     \r\n                        id=\"email\"\r\n                        name=\"email\"\r\n                        value={formL.email}\r\n                        onChange={changeHandlerL} />\r\n                  </div>\r\n                  <div className={styles.form_group+\" form-group \"}>\r\n                    <label htmlFor=\"exampleInputPassword1\">пароль</label>\r\n                    <input type=\"password\" className={styles.form_control+\" form-control\"}\r\n                        id=\"password\"\r\n                        name=\"password\"\r\n                        value={formL.password}\r\n                        onChange={changeHandlerL} />\r\n                  </div>\r\n                  <div className={\"form-group \"+styles.form_group}>\r\n                    <div className={\" form-check \"+styles.main_checkbox_+\" form-check\"}>\r\n                       {/* <input value=\"None\" id=\"checkbox1\" name=\"check\" type=\"checkbox\"/>\r\n                       <label htmlFor=\"checkbox1\"></label> */}\r\n                      <input className=\"form-check-input\" style={{\"marginLeft\":\"0px\"}} type=\"checkbox\" defaultChecked={checkbox}  onChange={()=>{setcheckbox(!checkbox)}}/>\r\n                      <label className=\"form-check-label\" htmlFor=\"flexCheckChecked\"> запомнить меня\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"form-group forgot_pass\">\r\n                      <button type=\"submit\"\r\n                        className=\"btn btn-warning w-100\"\r\n                        style={{ \"fontWeight\": \"bold\", \"color\": \"#fff\", \"borderRadius\": \"20px\" }}\r\n                        disabled={loading}              \r\n                        onClick={loginHandler}\r\n                      >Войти</button>\r\n                  </div>\r\n                </form>\r\n              </div>:\r\n              <div role=\"tabpanel\" className=\"tab-pane  \" id=\"Section2\"  >\r\n                <form className={styles.form_horizontal}>\r\n            <div className={\"form-group \"+ styles.form_group}>\r\n                    <label htmlFor=\"exampleInputEmail2\">имя</label>\r\n                                  <input\r\n                                    placeholder=\"ведите ваше имя\"\r\n                                    id=\"exampleInputEmail2\"\r\n                                    type=\"text\"\r\n                                    name=\"username\"\r\n                                    className={\"form-control \" + styles.form_control}\r\n                                    value={form.username}\r\n                                    onChange={changeHandler}\r\n                                  />        \r\n                  </div>\r\n                  <div className={styles.form_group} style={{}}>\r\n                    <label htmlFor=\"exampleInputEmail1\">фамилия</label>\r\n                      <input\r\n                        placeholder=\"ведите ваше фамилия\"\r\n                        id=\"exampleInputEmail1\"\r\n                        type=\"text\"\r\n                        name=\"surname\"\r\n                        className={\"form-control \" + styles.form_control}\r\n                        value={form.surname}\r\n                        onChange={changeHandler}\r\n                      />\r\n                  </div>\r\n                  <div className={styles.form_group}>\r\n                    <label htmlFor=\"exampleInputEmail1\">Email</label>\r\n                      <input\r\n                        placeholder=\"Введите email\"\r\n                        id=\"email\"\r\n                        type=\"text\"\r\n                        name=\"email\"\r\n                        className={\"form-control \" + styles.form_control}\r\n                        value={form.email}\r\n                        onChange={changeHandler}\r\n                      />\r\n                  </div>\r\n                  <div className={styles.form_group+\" form-group \"}>\r\n                    <label htmlFor=\"exampleInputPassword1\">пароль</label>\r\n                      <input type=\"password\"\r\n                        className={styles.form_control + \" form-control\"}\r\n                        placeholder=\"Введите пароль\"\r\n                        id=\"password\"\r\n                        name=\"password\"\r\n                        value={form.password}\r\n                        onChange={changeHandler}\r\n                        />\r\n                  </div>\r\n                  {/* <div className={styles.form_group+\" form-group \"}>\r\n                    <label htmlFor=\"exampleInputPassword1\">повтор пароля</label>\r\n                      <input type=\"password\"\r\n                        className={styles.form_control + \" form-control\"}\r\n                        placeholder=\"Введите пароль\"\r\n                        id=\"password\"\r\n                        name=\"password\"\r\n                        value={form.password2}\r\n                        onChange={changeHandler}\r\n                        />\r\n                  </div> */}\r\n                  <div className={\"form-group \"+styles.form_group}>\r\n                    <div className={\" form-check \"+styles.main_checkbox_+\" form-check\"}>\r\n                       {/* <input value=\"None\" id=\"checkbox1\" name=\"check\" type=\"checkbox\"/>\r\n                       <label htmlFor=\"checkbox1\"></label> */}\r\n                      <input className=\"form-check-input\" style={{\"marginLeft\":\"0px\"}} type=\"checkbox\"  id=\"flexCheckChecked\" defaultChecked={checkbox} onChange={()=>{setcheckbox(!checkbox);}}   />\r\n                      <label className=\"form-check-label\" htmlFor=\"flexCheckChecked\"> запомнить меня\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"form-group forgot_pass\">\r\n                      <button type=\"submit\"\r\n                        className=\"btn btn-warning w-100\"\r\n                        onClick={registerHandler}                                                      \r\n                        disabled={loading}\r\n                        style={{ \"fontWeight\": \"bold\", \"color\": \"#fff\", \"borderRadius\": \"20px\" }}>\r\n                        Регистрация</button>\r\n                  </div>\r\n                </form>\r\n              </div>}\r\n            </div>\r\n          </div>\r\n    </div>\r\n    </div>\r\n    </div>\r\n</div>\r\n</>\r\n  )\r\n}\r\n","import React, { useContext, useState, useEffect } from 'react'\r\nimport { NavLink, useHistory } from 'react-router-dom'\r\nimport { Context } from '../context/Context'\r\n\r\nexport const Header = (props) => {\r\n  const isAuthenticated = props.props;\r\n  const [state, setState] = useState({ authenticated: false, operator: false, adm: false });\r\n  const data = JSON.parse(localStorage.getItem('userData'));\r\n  const history = useHistory()\r\n  const auth = useContext(Context)\r\n  const logoutHandler = event => {\r\n    event.preventDefault()\r\n    auth.logout()\r\n    history.push('/AuthPage')\r\n  }\r\n  useEffect(() => {\r\n    setState(prevState => {\r\n      const newState = { ...prevState };\r\n  \r\n      if (isAuthenticated !== null) {\r\n        newState.authenticated = true;\r\n      }\r\n  \r\n      if (data && data.userEmail === \"admin@gmail.com\") {\r\n        newState.adm = true;\r\n      }\r\n  \r\n      switch (data && data.userEmail) {\r\n        case \"operator1@gmail.com\":\r\n        case \"operator2@gmail.com\":\r\n        case \"operator3@gmail.com\":\r\n        case \"operator4@gmail.com\":\r\n        case \"operator5@gmail.com\":\r\n          newState.operator = true;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n  \r\n      return newState;\r\n    });\r\n  }, [isAuthenticated]);\r\n  return (\r\n    <div>\r\n      <nav className=\"navbar navbar-expand-md navbar-dark  navbarbg\">\r\n        <div className=\"container-fluid\">\r\n        <NavLink className=\"navbar-brand\" to=\"/HomePage\">главная</NavLink>\r\n          <button className=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarCollapse\" aria-controls=\"navbarCollapse\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n            <span className=\"navbar-toggler-icon\"></span>\r\n          </button>\r\n          <div className=\"collapse navbar-collapse\" id=\"navbarCollapse\">\r\n            <ul className=\"navbar-nav me-auto mb-2 mb-md-0\">\r\n              {data ? state.operator ?\r\n                <li className=\"nav-item\">\r\n                  <NavLink className=\"nav-link\" to=\"/CallPage\">прием звонков</NavLink>\r\n                </li> :\r\n                <li className=\"nav-item\">\r\n                  <NavLink className=\"nav-link\" to=\"/CallPage\">позвонить</NavLink>\r\n                </li> : ''}\r\n              {data?state.adm ? <NavLink className=\"nav-link\" to=\"/AdminPanel\">админ панель</NavLink> : \"\":\"\"}\r\n            </ul>\r\n            <ul className='navbar-nav'>\r\n              <li className=\"nav-item\">\r\n                <a className=\"nav-link\" href=\"/AuthPage\" onClick={logoutHandler}>{data?\"выйти\":\"вход в аккаунт\"}</a>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n    </div>\r\n  )\r\n}\r\n","import { useState, useEffect, useContext, useCallback } from 'react';\r\nimport openSocket from 'socket.io-client';\r\nimport { toast } from 'react-toastify'\r\nimport { Context } from '../context/Context'\r\nimport { useHttp } from './http.hook';\r\n\r\n// const socket = openSocket.connect('http://localhost:5000/', { reconnection: false });\r\nconst socket = openSocket.connect('https://kosg.su', { reconnection: false })\r\nconst useOnlineRoom = (initialState) => {\r\n  const auth = useContext(Context);\r\n  const { token } = auth;\r\n  const { request } = useHttp();\r\n\r\n  const [isActive, setIsActive] = useState(\"не в сети\");\r\n  const [time, setTime] = useState(false);\r\n  const [online_room, setOnline_room] = useState([]);\r\n\r\n  const data = JSON.parse(localStorage.getItem('userData'));\r\n  const email = data.userEmail;\r\n\r\n  useEffect(() => {\r\n    let isCancelled = false;\r\n    socket.emit('createRoom', email);\r\n    socket.on('online_room', (data) => {\r\n      setOnline_room(data);\r\n    })\r\n    return () => {\r\n      isCancelled = true;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (online_room.length == 0) {\r\n      setIsActive(\"не в сети\");\r\n    } else {\r\n      let online = online_room\r\n      for (let index = 0; index < online.length; index++) {\r\n        const element = online[index];\r\n        if (element.operator === `room${initialState}`) {\r\n          setIsActive(\"online\");\r\n        }\r\n      }\r\n    }\r\n  }, [online_room]);\r\n\r\n  const fetchLinks = useCallback(async () => {\r\n    try {\r\n      const fetched = await request(`/api/time/${initialState}`, 'GET', null, {\r\n        Authorization: `Bearer ${token}`\r\n      });\r\n      setTime(fetched);\r\n    } catch (e) {\r\n      toast.error(`${e}`, {\r\n        position: \"top-right\",\r\n        autoClose: 5000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n    }\r\n  }, [initialState, request, token]);\r\n\r\n  useEffect(() => {\r\n    if (initialState) {\r\n      fetchLinks();\r\n    }\r\n  }, [fetchLinks, initialState]);\r\n\r\n  return {\r\n    isActive,\r\n    time,\r\n    online_room,\r\n    setOnline_room\r\n  };\r\n};\r\n\r\nexport default useOnlineRoom;\r\n","import React from 'react';\r\nimport Timer from '../components/Timer.js';\r\nimport useOnlineRoom from '../hooks/OnlineRoom.hook.js';\r\nimport {Link} from 'react-router-dom';\r\n\r\nexport const AdminPanel = () => {\r\n   const isActive1 = useOnlineRoom(1).isActive;\r\n   const isActive2 = useOnlineRoom(2).isActive;\r\n   const isActive3 = useOnlineRoom(3).isActive;\r\n   const isActive4 = useOnlineRoom(4).isActive;\r\n   const isActive5 = useOnlineRoom(5).isActive;\r\n   const time1 = useOnlineRoom(1).time;\r\n   const time2 = useOnlineRoom(2).time;\r\n   const time3 = useOnlineRoom(3).time;\r\n   const time4 = useOnlineRoom(4).time;\r\n   const time5 = useOnlineRoom(5).time;\r\n    return(\r\n    <div className=\"container mt-5\">\r\n        <Link\r\n          style={{\"textDecoration\": \"none\"}}\r\n          to={`/detailVideo/${1}`}\r\n          className=\"col-xl-8 mt-3 adminLink\"\r\n        >\r\n          <div className=\"row mt-3 p-3 d-flex flex-row list-group-item-primary align-self-center shadow-lg rounded-3 align-items-center\">\r\n            <h5 className=\"col-4 m-0\">Operator1</h5>\r\n            <span className=\"col-2 text-center text-success rounded-3\">{isActive1}</span>\r\n            <p className=\"col-6 m-0 text-center\">\r\n              <span className=\"text-warning m-0 text-dark\">\r\n                <Timer props={time1} />\r\n              </span>\r\n            </p>\r\n          </div>\r\n        </Link>\r\n        <Link\r\n            style={{\"textDecoration\": \"none\"}}\r\n          to={`/detailVideo/${2}`}\r\n          className=\"col-xl-8 mt-3 adminLink\"\r\n        >\r\n          <div className=\"row mt-3 p-3 d-flex flex-row list-group-item-primary align-self-center shadow-lg rounded-3 align-items-center\">\r\n            <h5 className=\"col-4 m-0\">Operator1</h5>\r\n            <span className=\"col-2 text-center text-success rounded-3\">{isActive2}</span>\r\n            <p className=\"col-6 m-0 text-center\">\r\n              <span className=\"text-warning m-0 text-dark\">\r\n                <Timer props={time2} />\r\n              </span>\r\n            </p>\r\n          </div>\r\n        </Link>\r\n        <Link\r\n           style={{\"textDecoration\": \"none\"}}\r\n          to={`/detailVideo/${3}`}\r\n          className=\"col-xl-8 mt-3 adminLink\"\r\n        >\r\n          <div className=\"row mt-3 p-3 d-flex flex-row list-group-item-primary align-self-center shadow-lg rounded-3 align-items-center\">\r\n            <h5 className=\"col-4 m-0\">Operator3</h5>\r\n            <span className=\"col-2 text-center text-success rounded-3\">{isActive3}</span>\r\n            <p className=\"col-6 m-0 text-center\">\r\n              <span className=\"text-warning m-0 text-dark\">\r\n                <Timer props={time3} />\r\n              </span>\r\n            </p>\r\n          </div>\r\n        </Link>\r\n        <Link\r\n           style={{\"textDecoration\": \"none\"}}\r\n          to={`/detailVideo/${4}`}\r\n          className=\"col-xl-8 mt-3 adminLink\"\r\n        >\r\n          <div className=\"row mt-3 p-3 d-flex flex-row list-group-item-primary align-self-center shadow-lg rounded-3 align-items-center\">\r\n            <h5 className=\"col-4 m-0\">Operator4</h5>\r\n            <span className=\"col-2 text-center text-success rounded-3\">{isActive4}</span>\r\n            <p className=\"col-6 m-0 text-center\">\r\n              <span className=\"text-warning m-0 text-dark\">\r\n                <Timer props={time4} />\r\n              </span>\r\n            </p>\r\n          </div>\r\n        </Link>\r\n        <Link\r\n           style={{\"textDecoration\": \"none\"}}\r\n          to={`/detailVideo/${5}`}\r\n          className=\"col-xl-8 mt-3 adminLink\"\r\n        >\r\n          <div className=\"row mt-3 p-3 d-flex flex-row list-group-item-primary align-self-center shadow-lg rounded-3 align-items-center\">\r\n            <h5 className=\"col-4 m-0\">Operator5</h5>\r\n            <span className=\"col-2 text-center text-success rounded-3\">{isActive5}</span>\r\n            <p className=\"col-6 m-0 text-center\">\r\n              <span className=\"text-warning m-0 text-dark\">\r\n                <Timer props={time5} />\r\n              </span>\r\n            </p>\r\n          </div>\r\n        </Link>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\n\r\nexport const Loader = () => (\r\n  <div style={{display: 'flex', justifyContent: 'center', paddingTop: '2rem'}}>\r\n    <div className=\"preloader-wrapper active\">\r\n      <div className=\"spinner-layer spinner-red-only\">\r\n        <div className=\"circle-clipper left\">\r\n          <div className=\"circle\" />\r\n        </div>\r\n        <div className=\"gap-patch\">\r\n          <div className=\"circle\" />\r\n        </div>\r\n        <div className=\"circle-clipper right\">\r\n          <div className=\"circle\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n)\r\n","import React from 'react'\r\n\r\nexport const LinksList = ({ links }) => {\r\n  if (!links.length) {\r\n    return <h2 className=\"center\">нет записи</h2>\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {links.map((element, index) => {\r\n        return (\r\n          <div key={index} className=\"bg-light row mb-3\" style={{ \"maxWidth\": \"35rm\" }}>\r\n            <div className='col-6'>\r\n              <ul className=\"list-group\">\r\n                <div>Дата</div>\r\n                <li className=\"list-group-item text-sm\">{new Date(`${element.date}`).toLocaleDateString()}</li>\r\n                <div>Звонок от</div>\r\n                <li className=\"list-group-item text-sm\" style={{ \"overflowY\": \"auto\" }}>{element.callFrom}</li>\r\n              </ul>\r\n            </div>\r\n            <div className='col-6'>\r\n              <div className=\"d-flex flex-column align-content-end\">\r\n                <ul className=\"list-group w-100\">\r\n                  <div>Длительность</div>\r\n                  <li className=\"list-group-item\">{element.duration}</li>\r\n                </ul>\r\n                {/* <a className=\"btn btn-link text-sm mt-4\" href={`http://localhost:5000/static/${element.videoName}.webm`}>Посмотреть видео</a> */}\r\n                <a className=\"btn btn-primary text-sm mt-4\" href={`https://kosg.su/static/${element.videoName}.webm`}>Посмотреть видео</a>\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )\r\n      })}\r\n    </>\r\n  )\r\n}\r\n","import React, { useCallback, useContext, useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useHttp } from '../hooks/http.hook';\r\nimport { Context } from '../context/Context';\r\nimport { Loader } from '../components/Loader';\r\nimport { toast, ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { LinksList } from '../components/LinksList';\r\n\r\nexport const VideoPage = () => {\r\n  const operatorRoomId = useParams().id;\r\n  const [videoPath, setVideoPath] = useState([]);\r\n  const { loading, request } = useHttp();\r\n  const auth = useContext(Context);\r\n  const { token } = auth;\r\n\r\n  const [form, setForm] = useState('');\r\n  const [filteredVideoPath, setFilteredVideoPath] = useState([]);\r\n  \r\n  const fetchLinks = useCallback(async () => {\r\n    try {\r\n      const fetched = await request(`/api/video/operator/${operatorRoomId}`, 'GET', null, {\r\n        Authorization: `Bearer ${token}`,\r\n      });\r\n      setVideoPath(fetched);\r\n      console.log(fetched);\r\n    } catch (e) {\r\n      toast.error(`${e}`, {\r\n        position: \"top-right\",\r\n        autoClose: 2000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n        });\r\n    }\r\n  }, [token, request, operatorRoomId]);\r\n\r\n  useEffect(() => {\r\n    fetchLinks();\r\n  }, [fetchLinks]);\r\n\r\n  useEffect(() => {\r\n    setFilteredVideoPath(\r\n      videoPath.filter((link) => link.callFrom && link.callFrom.toLowerCase().includes(form.toLowerCase()))\r\n    );\r\n  }, [form, videoPath]);\r\n\r\n  const changeHandler = (event) => {\r\n    event.preventDefault();\r\n    setForm(event.target.value);\r\n  };\r\n\r\n  if (loading) {\r\n    return <Loader />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <ToastContainer\r\n        position=\"top-right\"\r\n        autoClose={5000}\r\n        hideProgressBar={false}\r\n        newestOnTop={false}\r\n        closeOnClick\r\n        rtl={false}\r\n        pauseOnFocusLoss\r\n        draggable\r\n        pauseOnHover\r\n      />\r\n      <div className=\"container\">\r\n        <div className=\"d-flex\">\r\n          <input\r\n            className=\"form-control mb-4 mt-4\"\r\n            id=\"tableSearch\"\r\n            type=\"text\"\r\n            placeholder=\"Type something to search list items\"\r\n            value={form}\r\n            onChange={changeHandler}\r\n          />\r\n          {/* <input onClick={onFormSubmit} type=\"submit\" className='btn btn-primary mb-4 mt-4 pl-2'></input> */}\r\n        </div>\r\n\r\n        {!loading && <LinksList links={filteredVideoPath} />}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","import React,{useState,useEffect } from 'react'\r\nimport {Switch, Route, Redirect} from 'react-router-dom'\r\nimport {HomePage} from './pages/HomePage'\r\nimport {CallPage} from './pages/CallPage'\r\nimport {AuthPage} from './pages/AuthPage'\r\nimport { Header } from './components/Header'\r\nimport {AdminPanel} from './pages/AdminPanel'\r\nimport { VideoPage } from './pages/VideoPage'\r\n// const AdminPanel = lazy(() => import('./pages/AdminPanel'));\r\n\r\nexport const useRoutes = (isAuthenticated) => {\r\n  const [operator, setOperator] = useState(null);\r\n  const data = JSON.parse(localStorage.getItem('userData'));\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    switch (data && data.userEmail) {\r\n      case 'operator1@gmail.com':\r\n        isMounted && setOperator({ operator: 1 });\r\n        break;\r\n      case 'operator2@gmail.com':\r\n        isMounted && setOperator({ operator: 2 });\r\n        break;\r\n      case 'operator3@gmail.com':\r\n        isMounted && setOperator({ operator: 3 });\r\n        break;\r\n      case 'operator4@gmail.com':\r\n        isMounted && setOperator({ operator: 4 });\r\n        break;\r\n      case 'operator5@gmail.com':\r\n        isMounted && setOperator({ operator: 5 });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [0]);\r\n\r\n  if (isAuthenticated) {\r\n    return (\r\n      <>\r\n        <Header props={operator} />\r\n        <Switch>\r\n          {operator ? (\r\n            <Route path=\"/CallPage\">\r\n              <CallPage props={operator} />\r\n            </Route>\r\n          ) : (\r\n      \r\n            <Route path=\"/CallPage\">\r\n              <CallPage props={operator} />\r\n            </Route>\r\n\r\n          )}\r\n            <Route path=\"/AdminPanel\" exact>\r\n              <AdminPanel />\r\n            </Route>\r\n          <Route path=\"/detailVideo/:id\">\r\n            <VideoPage />\r\n          </Route>\r\n          <Redirect to=\"/HomePage\" />\r\n        </Switch>\r\n        <Route path=\"/HomePage\" exact>\r\n          <HomePage />\r\n        </Route>\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Header props={operator} />\r\n      <Switch>\r\n        <Route path=\"/HomePage\" exact>\r\n          <HomePage />\r\n        </Route>\r\n        <Route path=\"/AuthPage\" exact>\r\n          <AuthPage />\r\n        </Route>\r\n        <Redirect to=\"/HomePage\" />\r\n      </Switch>\r\n    </>\r\n  );\r\n};\r\n\r\n","import {useState, useCallback, useEffect} from 'react'\r\n\r\nconst storageName = 'userData'\r\n\r\nexport const useAuth = () => {\r\n  const [token, setToken] = useState(null)\r\n  const [ready, setReady] = useState(false)\r\n  const [userId, setUserId] = useState(null)\r\n   const [userEmail, setUserEmail] = useState(null)\r\n\r\n  const login = useCallback((jwtToken, id, useremail, username, surname, checkbox) => {\r\n    setToken(jwtToken)\r\n    setUserId(id)\r\n    setUserEmail(useremail)\r\n    checkbox&&localStorage.setItem(storageName, JSON.stringify({\r\n      userId: id, token: jwtToken, username:username, usersurname:surname, userEmail:useremail\r\n    }))\r\n  }, [])\r\n\r\n\r\n  const logout = useCallback(() => {\r\n    setToken(null)\r\n    setUserId(null)\r\n     setUserEmail(null)\r\n    localStorage.removeItem(storageName)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const data = JSON.parse(localStorage.getItem(storageName))\r\n\r\n    if (data && data.token) {\r\n      login(data.token, data.userId, data.userEmail)\r\n    }\r\n    setReady(true)\r\n  }, [login])\r\n\r\n\r\n  return { login, logout, token, userId, ready , userEmail }\r\n}\r\n","import React from 'react'\r\nimport {BrowserRouter as Router} from 'react-router-dom'\r\nimport {useRoutes} from './routes'\r\nimport {useAuth} from './hooks/auth.hook'\r\nimport {Context} from './context/Context'\r\nimport {Loader} from './components/Loader'\r\nimport 'bootstrap/dist/css/bootstrap.min.css' ;\r\nimport \"./index.css\";\r\n\r\nfunction App() {\r\n  const {token, login, logout, userId, ready, userEmail} = useAuth()\r\n  const isAuthenticated = !!token\r\n  const routes = useRoutes(isAuthenticated)\r\n  if (!ready) {\r\n    return <Loader />\r\n  }\r\n\r\n  return (\r\n    <Context.Provider value={{\r\n      token, login, logout, userId, isAuthenticated,userEmail\r\n    }}>\r\n\r\n      <Router>\r\n          {routes}\r\n      </Router>\r\n\r\n    </Context.Provider>\r\n  )\r\n}\r\n\r\nexport default App\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n// import 'bootstrap/dist/css/bootstrap.min.css' ;\r\n// import './index.css';\r\n// import 'bootstrap/dist/css/bootstrap.min.css' ;\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title_callOperator\":\"CallPage_title_callOperator__21gFc\",\"title_callOperator_er\":\"CallPage_title_callOperator_er__2Bt9P\",\"container\":\"CallPage_container__2JbY-\",\"video_row\":\"CallPage_video_row__lF8uT\",\"video\":\"CallPage_video__2S1Z6\",\"video_player\":\"CallPage_video_player__1tEDy\",\"user_name\":\"CallPage_user_name__2ZxNZ\",\"HangUp_div\":\"CallPage_HangUp_div__DZu0t\",\"operatot_video_row\":\"CallPage_operatot_video_row__3GyDw\",\"call_btn_h\":\"CallPage_call_btn_h__32WUM\",\"callBtn\":\"CallPage_callBtn__35jlj\",\"btn_call_text\":\"CallPage_btn_call_text__243qg\",\"btn_call_name\":\"CallPage_btn_call_name__2v_-k\",\"btn_call\":\"CallPage_btn_call__nk4hg\",\"hoverWave\":\"CallPage_hoverWave__1iEY-\",\"wraper_callBtn\":\"CallPage_wraper_callBtn__1oZZK\",\"video_player_operator\":\"CallPage_video_player_operator__1BSLS\",\"video_operator\":\"CallPage_video_operator__h-PSa\",\"video_player_user\":\"CallPage_video_player_user__2jGKz\",\"video_player_little\":\"CallPage_video_player_little__1O0g5\",\"modal_container\":\"CallPage_modal_container__3Ej6m\",\"is_open\":\"CallPage_is_open__1yGaj\",\"modal_content\":\"CallPage_modal_content__1W_SB\",\"close\":\"CallPage_close__3XJa1\",\"btn_call__ico\":\"CallPage_btn_call__ico__3Ht6l\",\"btn-call__ico\":\"CallPage_btn-call__ico__rAniN\",\"shake\":\"CallPage_shake__2qA5I\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav_link\":\"AuthPage_nav_link__2_x8Z\",\"active\":\"AuthPage_active__1qPOq\",\"tab\":\"AuthPage_tab__15AFY\",\"nav_tabs\":\"AuthPage_nav_tabs__3gjUK\",\"tab_content\":\"AuthPage_tab_content__1iGXm\",\"form-bg\":\"AuthPage_form-bg__2mYEn\",\"form_horizontal\":\"AuthPage_form_horizontal__27vTV\",\"form_group\":\"AuthPage_form_group__1nXGl\",\"form_control\":\"AuthPage_form_control__2JhSL\",\"main_checkbox\":\"AuthPage_main_checkbox__1G21U\",\"text\":\"AuthPage_text__6h3LN\",\"btn\":\"AuthPage_btn__1pT8A\",\"forgot_pass\":\"AuthPage_forgot_pass__20NJc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"HomePage_title__3_ieP\"};","module.exports = __webpack_public_path__ + \"static/media/skayp-call.8a6a4544.mp3\";","module.exports = __webpack_public_path__ + \"static/media/toot.1e3e7b81.mp3\";"],"sourceRoot":""}